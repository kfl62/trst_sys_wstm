:ruby
  firm = Wstm::PartnerFirm.find_by(firm: true)
  dups = Wstm::Grn.monthly(@object.id_date.year,@object.id_date.month).where(:id.ne => @object.id,doc_name: @object.doc_name,supplr_id: @object.supplr_id)
%span#hidden_data.hidden{data: {dialog: "show",model_name: mat(@object,@object.id_intern == true ? 'model_name_id_intern' : 'model_name'),oid: @object.id,js_ext: 'desk_grn'}}
%form{action: "/sys/#{@path}", method: "get"}
  %table{cellspacing: "0"}
    %thead
      - if dups.count > 0
        - dups.asc(:id_date).each do |d|
          %tr.pdb-05
            %td{colspan: @object.id_intern == true ? '5' : '6'}
              %span.warning.width-450{title: d.freights_list.join("\n")}= t('intro.show.desk_grn_dups',id_date: d.id_date.to_s,doc_name: d.doc_name,supplr: d.supplr.name[0])
      %tr.pdb-05
        %td{colspan: @object.id_intern == true ? '5' : '6'}
          %span.info.width-450.ju= t('intro.show.desk_grn',id_date: l(@object.id_date,format: :trst),unit: firm.units.find(@object.unit_id).name[1],signed_by: @object.signed_by.name,supplr: @object.supplr.name[2],transp_d: @object.transp_d.name)
    = partial "#{@path}/show"
    %tfoot
      %tr
        %td.buttonset.ce{colspan: @object.id_intern == true ? '5' : '6'}
          - if @object.freights.count == 0
            %button{type: "button", data: {action: "delete", icon: "circle-minus",type: 'delete'}}= t('button.delete')
          - else
            %button{type: "button", data: {action: "print",  icon: "print"}}= t('button.print')
            %button{type: "button", data: {action: "delete", icon: "circle-minus",remove: 'false'}}= t('button.delete')
            %button{type: "button", data: {action: "cancel", icon: "circle-close"}}= t('button.cancel')
