- @object.reload
- if @object.freights.count > 0
  %tbody.inner
    %tr
      - mat(@object,'table_header_show').each do |label|
        %td
          %span= label
    - @object.reload; @object.freights.each do |o|
      %tr
        - o.set(:val, (o.pu * o.qu).round(2)) unless o.val > 0
        - td_value_for  o, 'freight',   {order: 'name',style: 'name',nested: 'doc_cas'}
        - td_value_for  o, 'um',        {style: 'um ta-ce', nested: 'doc_cas'}
        - td_value_for  o, 'pu',        {style: 'pu ta-ri', nested: 'doc_cas'}
        - td_value_for  o, 'qu',        {style: 'val ta-ri',nested: 'doc_cas'}
        - td_value_for  o, 'val',       {style: 'val ta-ri',nested: 'doc_cas'}
        %td.ta-ri
          %span.res= "%.2f" % o.freight.stock_by_key(o.freight.key(o.pu))
    %tr
      %td.ce.st{colspan: '3'}
        %span Total
      %td
        %span.res= "%.2f" % @object.freights.sum(:qu)
      %td
        %span.val= "%.2f" % @object.freights.sum(:val)
        - @object.set(:val,@object.freights.sum(:val))
      %td
        %span &nbsp;
- else
  %tbody
    %tr.pdb-05
      %td
        %span.warning= t('msg.no_freight_selected')
