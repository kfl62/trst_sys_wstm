:ruby
  unit_id = @current_user.unit_id || session[:unit_id]
  forbidden = @object.id_date != Date.today.end_of_month.tomorrow
- if forbidden
  %span#hidden_data.hidden{data: {dialog: "delete",model_name: mat(@object,'model_name'),oid: @object.id,js_ext: 'desk_stock'}}
  %form{action: "/sys/#{@path}", method: "delete"}
    %table{cellspacing: "0"}
      %thead
        %tr
          %td
            %span.warning.width-350.ju= t('intro.delete.desk_stock.forbidden', data: mat(@object,'model_name'))
        %tr
          %td
            - label_for @object, 'name',    {style: 'stats'}
            - value_for @object, 'name',    {style: 'stats st'}
            - label_for @object, 'id_date', {style: 'stats'}
            %span.stats.width-150.ce.st= @object.id_date.to_s
        %tr
          %td
            - value_for @object, 'expl',    {style: 'stats width-250'}
      = partial "/#{@path}/show"
      %tfoot
        %tr
          %td.buttonset.ce
            %button{type: "button", data: {action: "cancel",icon: "circle-close"}}= t('button.cancel')
- else
  %span#hidden_data.hidden{data: {dialog: "delete",model_name: mat(@object,'model_name'),oid: @object.id,js_ext: 'desk_stock'}}
  %form{action: "/sys/#{@path}", method: "delete"}
    %table{cellspacing: "0"}
      %thead
        %tr
          %td
      = partial "/#{@path}/show"
      %tfoot
        %tr
          %td.buttonset.ce
            %button{type: "button", data: {action: "delete",icon: "circle-minus"}}= t('button.delete')
            %button{type: "button", data: {action: "cancel",icon: "circle-close"}}= t('button.cancel')
